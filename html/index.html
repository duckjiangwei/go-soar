<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>GO-SOAR</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' href='/resources/css/bootstrap.min.css'>
  <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js">
  </script>
</head>
<body>
  <ul class="nav nav-pills">
    <li role="presentation" class="active"><a href="/">SQL</a></li>
    <li role="presentation"><a href="file">文件</a></li>
  </ul>
  <div>
    <form>
    <label for="inputHelpBlock">请输入sql语句：</label>
    <textarea class="form-control" rows="3" name="sql"></textarea>
    <span id="helpBlock" class="help-block">注意：支持多条sql提交，用 ; 隔开</span>
    <button type="button" class="btn btn-default" id="aa">提交</button>
  </form>
  </div>
</body>
</html>

<script>

$(document).ready(function(){
      $('[data-toggle="popover"]').popover()
      $("button").click(function(){
        var _sql = $('textarea[name="sql"]').val();
        $.post("/v1/soar/sql",
        {
            sql:_sql,
        },
        function(data,status){
          if(data.code == 200){
            window.open(data.data.data.url)
          }else{
            alert(data.error.sql)
          }
        });
    });
  })
</script>